import { useState, useRef } from "react";
import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { IcTextField } from "../components";
import {SlottedSVG} from "../react-component-lib/slottedSVG";
import readme from "../../../web-components/src/components/ic-text-field/readme.md";

<Meta title="Text field" component={IcTextField} />

<Description markdown={readme} />

export const SlottedIcon = () => (
  <SlottedSVG 
    slot="icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 0 24 24"
    width="24px"
    fill="#000000"
  >
    <path d="M0 0h24v24H0z" fill="none" />
    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
  </SlottedSVG>  
);

export const ControlledExample = () => {
  const [value, setValue] = useState("");
  const handleChange = (event) => {
    console.log(event.detail.value);
    setValue(event.detail.value);
  };
  return (
    <IcTextField
      placeholder="Controlled"
      label="Controlled"
      value={value}
      onIcChange={handleChange}
    />
  );
};

### Default

<Canvas>
  <Story name="Default">
    <IcTextField label="What is your favourite coffee?" />
    <IcTextField rows="6" label="What is your favourite coffee?" />
  </Story>
</Canvas>

### Placeholder and required

<Canvas>
  <Story name="Placeholder and required">
    <IcTextField
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
    />
    <IcTextField
      rows="6"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
    />
  </Story>
</Canvas>

### Helper text

<Canvas>
  <Story name="Helper text">
    <IcTextField
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
    <IcTextField
      rows="6"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
  </Story>
</Canvas>

### With icon

<Canvas>
  <Story name="With icon">
    <IcTextField
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      rows="6"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    >
      <SlottedIcon />
    </IcTextField>
  </Story>
</Canvas>

### With value

<Canvas>
  <Story name="With value">
    <IcTextField
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      rows="6"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    >
      <SlottedIcon />
    </IcTextField>
  </Story>
</Canvas>

### Max length

<Canvas>
  <Story name="Max length">
    <IcTextField
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
    <IcTextField
      rows="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
  </Story>
</Canvas>

### Max length message

<Canvas>
  <Story name="Max length message">
    <IcTextField
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
      maxLengthMessage="You have exceeded the maximum length"
    />
    <IcTextField
      rows="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
      maxLengthMessage="You have exceeded the maximum length"
    />
  </Story>
</Canvas>

### Full width

<Canvas>
  <Story name="Full width">
    <IcTextField
      fullWidth="true"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
    <IcTextField
      fullWidth="true"
      true="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
  </Story>
</Canvas>

### Disabled

<Canvas>
  <Story name="Disabled">
    <IcTextField
      disabled
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
    <IcTextField
      rows="6"
      disabled
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
  </Story>
</Canvas>

### Read only

<Canvas>
  <Story name="Read only">
    <IcTextField
      readonly
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
    <IcTextField
      rows="6"
      readonly
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    />
  </Story>
</Canvas>

### Validation

<Canvas>
  <Story name="Validation">
    <IcTextField
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="success"
      validationText="Good choice!"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      rows="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="success"
      validationText="Good choice!"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="success"
      validationText="Good choice!"
      validationInline
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      maxLength="25"
      size="small"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="success"
      validationText="Good choice!"
      validationInline
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="warning"
      validationText="A very long warning message to test if wrapping works"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      rows="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="warning"
      validationText="A very long warning message to test if wrapping works"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      maxLength="25"
      value="Tea"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="error"
      validationText="Now it has really gone to (coffee) pot"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      rows="6"
      maxLength="25"
      value="Tea"
      label="What is your favourite coffee?"
      required
      helperText="Such as Arabica, Robusta or Liberica"
      validationStatus="error"
      validationText="Now it has really gone to (coffee) pot"
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      validationStatus="error"
      validationText="now it has really gone to (coffee) pot"
      value="6"
      inputmode="numeric"
      label="How many coffees do you want?"
      helperText="Our coffee machines have a maximum capacity of 4 coffees at a time."
      type="number"
      min="1"
      max="4"
      required
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      validationStatus="error"
      validationText="now it has really gone to (coffee) pot"
      value="0"
      inputmode="numeric"
      label="How many coffees do you want?"
      helperText="Our coffee machines have a maximum capacity of 4 coffees at a time."
      type="number"
      min="1"
      max="4"
      required
    >
      <SlottedIcon />
    </IcTextField>
    <IcTextField
      validationStatus="error"
      validationText="I'm not familiar with this type of coffee"
      validationInlineInternal="true"
      value="Milkshake"
      label="What is your favourite coffee?"
      required
      hideLabel
      size="small"
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
    >
      <SlottedIcon />
    </IcTextField>
  </Story>
</Canvas>

### Text area with resize

<Canvas>
  <Story name="Text area with resize">
    <IcTextField
      rows="6"
      maxLength="25"
      value="Arabica"
      label="What is your favourite coffee?"
      required
      placeholder="Placeholder"
      helperText="Such as Arabica, Robusta or Liberica"
      resize
      size="small"
    />
  </Story>
</Canvas>

### Controlled

```
export const ControlledExample = () => {
  const [value, setValue] = useState("");
  const handleChange = (event) => {
    console.log(event.detail.value);
    setValue(event.detail.value);
  }
  return (
    <IcTextField placeholder="Controlled" label="Controlled" value={value} onIcChange={handleChange} />
  );
};
```

<Canvas>
  <Story name="Controlled">
    <ControlledExample />
  </Story>
</Canvas>

### Uncontrolled

export const Uncontrolled = () => {
  const textFieldEl = useRef();
  const handleChange = () => {
    console.log(textFieldEl.current.value);
  };
  return (
    <IcTextField
      ref={textFieldEl}
      placeholder="Uncontrolled"
      label="Uncontrolled"
      onIcChange={handleChange}
    />
  );
};

<Canvas>
  <Story name="Uncontrolled">
    <Uncontrolled />
  </Story>
</Canvas>

### Min and max

<Canvas>
  <Story name="Min and max">
    <IcTextField
      inputmode="numeric"
      label="How many coffees do you want?"
      type="number"
      min={1}
      max={4}
      helperText="Our coffee machines have a maximum capacity of 4 coffees at a time."
    />
  </Story>
</Canvas>

### Maximum and minimum characters

<Canvas>
  <Story
    name="Maximum and minimum characters"
    parameters={{ loki: { skip: true } }}
  >
    <IcTextField
      max-characters={2}
      label="What is your favourite coffee?"
      helper-text="Short answers only."
    ></IcTextField>
    <IcTextField
      min-characters={3}
      label="What is your favourite coffee?"
      helper-text="Long answer please."
    ></IcTextField>
  </Story>
</Canvas>

### Playground

export const defaultArgs = {
  disabled: false,
  fullWidth: false,
  helperText: "",
  hideLabel: false,
  inputId: "ic-text-field-input-0",
  inputmode: "text",
  label: "Text Field",
  maxCharacters: 0,
  maxLength: 0,
  maxLengthMessage: "Too many characters",
  minCharacters: 0,
  name: "0",
  placeholder: "",
  readonly: false,
  required: false,
  resize: false,
  rows: 1,
  size: "default",
  spellcheck: false,
  type: "text",
  validationInline: false,
  validationStatus: "none",
  validationText: "",
  debounce: 0
};

<Canvas>
  <Story
    args={defaultArgs}
    argTypes={{
      inputmode: {
        options: ["none", "text", "tel", "url", "email", "numeric", "decimal", "search"],
        control: { type: "select" }
      },
      size: {
        options: ["default", "small"],
        control: { type: "inline-radio" }
      },
      type: {
        options: ["email", "password", "tel", "text", "url", "number", "search"],
        control: { type: "select" }
      },
      validationStatus: {
        options: ["warning", "error", "success", "none"],
        mapping: {
          "warning": "warning",
          "error": "error",
          "success": "success",
          "none": ""
        },
        control: { type: "select" }
      },
      showIconSlot: {
        control: { type: "boolean" }
      }
    }}
    name="Playground"
  >
    {(args) => (
      <IcTextField 
        label={args.label}
        disabled={args.disabled}
        fullWidth={args.fullWidth}
        helperText={args.helperText}
        hideLabel={args.hideLabel}
        inputId={args.inputId}
        inputmode={args.inputmode}
        max={args.max}
        maxCharacters={args.maxCharacters}
        maxLength={args.maxLength}
        maxLengthMessage={args.maxLengthMessage}
        min={args.min}
        minCharacters={args.minCharacters}
        name={args.name}
        placeholder={args.placeholder}
        readonly={args.readonly}
        required={args.required}
        resize={args.resize}
        rows={args.rows}
        size={args.size}
        spellcheck={args.spellcheck}
        type={args.type}
        validationInline={args.validationInline}
        validationStatus={args.validationStatus}
        validationText={args.validationText}
        debounce={args.debounce}
        onIcChange={(ev) => console.log(ev.detail.value)}
      >
        {args.showIconSlot && (
          <SlottedSVG 
            slot="icon"
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 0 24 24"
            width="24px"
            fill="#000000"
          >
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
          </SlottedSVG>  
        )}
      </IcTextField>
    )}
  </Story>
</Canvas>
