import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { IcDateInput, IcButton } from "../components";
import readme from "../../../web-components/src/components/ic-date-input/readme.md";
import { useRef } from "react";

<Meta title="React Components/Date input" component={IcDateInput} />

<Description markdown={readme} />

<Canvas>
  <Story name="Default">
    <IcDateInput
      label="When would you like to collect your coffee?"
      onIcChange={(ev) => console.log(event.detail.value)}
    />
    <br />
    <IcDateInput
      label="When would you like to collect your coffee?"
      dateFormat="MM/DD/YYYY"
    />
    <br />
    <IcDateInput
      label="When would you like to collect your coffee?"
      dateFormat="YYYY/MM/DD"
    />
  </Story>
</Canvas>

export const DateInputWithValue = () => {
  const dateInput = useRef(null);
  const updateDate = () => {
    dateInput.current.value = new Date("5 May 2005");
  };
  return (
    <>
      <IcDateInput
        ref={dateInput}
        id="date-input-default-date-with-value"
        label="When would you like to collect your coffee?"
        value="21/01/2001"
      />
      <IcButton onClick={updateDate}>Update date</IcButton>
    </>
  );
};

<Canvas>
  <Story name="With value" parameters={{ loki: { skip: true } }}>
    <DateInputWithValue />
  </Story>
</Canvas>

### Required

<Canvas>
  <Story name="Required">
    <IcDateInput label="When would you like to collect your coffee?" required />
  </Story>
</Canvas>

### Disabled

<Canvas>
  <Story name="Disabled">
    <IcDateInput label="When would you like to collect your coffee?" disabled />
  </Story>
</Canvas>

### With calendar

<Canvas>
    <Story name='With calendar'>
        <IcDateInput
          label='When would you like to collect your coffee?'
          showCalendarButton
        />
    </Story>
</Canvas>

### Sizes

<Canvas>
    <Story name='Sizes'>
        <IcDateInput
          label='When would you like to collect your coffee?'
          size="small"
        />
        <br/>
        <IcDateInput
          label='When would you like to collect your coffee?'
        />
        <br/>
        <IcDateInput
          label='When would you like to collect your coffee?'
          size="large"
        />
    </Story>
</Canvas>


### Custom helper text

<Canvas>
  <Story name="Custom helper text">
    <IcDateInput
      label="When would you like to collect your coffee?"
      helperText="We will have your order ready for you on this date"
    />
  </Story>
</Canvas>

### Custom validation

<Canvas>
  <Story name="Custom validation">
    <IcDateInput
      label="When would you like to collect your coffee?"
      validationStatus="error"
      validationText="There is a coffee shortage forecast for that day. Please choose a different date."
    />
    <br />
    <IcDateInput
      label="When would you like to collect your coffee?"
      validationStatus="warning"
      validationText="Please be aware that there may be a coffee shortage on that day."
    />
    <br />
    <IcDateInput
      label="When would you like to collect your coffee?"
      validationStatus="success"
      validationText="Your coffee will be available for you to collect on this day."
    />
    <br />
  </Story>
</Canvas>

### Default date (Date object)

<Canvas>
  <Story name="Default date (Date object)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      value={new Date("28 November 2021")}
    />
  </Story>
</Canvas>

### Default date (Zulu object)

<Canvas>
  <Story name="Default date (Zulu object)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      value={new Date("28 November 2021").toISOString()}
    />
  </Story>
</Canvas>

### Default date (DD/MM/YYYY)

<Canvas>
  <Story name="Default date (with slashes)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      value="21/01/2005"
    />
  </Story>
</Canvas>

### Default date (DD-MM-YYYY)

<Canvas>
  <Story name="Default date (with dashes)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      value="25-05-2005"
    />
  </Story>
</Canvas>

### Default date (Epoch Time)

<Canvas>
  <Story name="Default date (epoch time)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      value={Date.now()}
    />
  </Story>
</Canvas>

### Default date (until-now)

<Canvas>
  <Story name="Default date (until now)">
    <IcDateInput
      label='When would you like to collect your coffee?'
      value='25-05-2005'
      disableUntilNow
    />
  </Story>
</Canvas>

### Default date (not matching format)

<Canvas>
  <Story name="Default date (not matching format)">
    <IcDateInput
      label="When would you like to collect your coffee?"
      dateFormat="MM/DD/YYYY"
      value="25-05-2025"
    />
  </Story>
</Canvas>

### Dates until now disabled

<Canvas>
  <Story name="Dates until now disabled">
    <>
      <IcDateInput
        label='When would you like to collect your coffee?'
        disableUntilNow
      />
      <IcTypography>Enter a date in the past</IcTypography>
    </>
  </Story>
</Canvas>

### Dates from now disabled

<Canvas>
  <Story name="Dates from now disabled">
    <>
    <IcDateInput
      label='When would you like to collect your coffee?'
      disableFromNow
    />
      <IcTypography>Enter a date in the future</IcTypography>
    </>
  </Story>
</Canvas>


### Disabled days

<Canvas>
  <Story name="Disabled days">
      <IcDateInput
        label="When would you like to collect your coffee?"
        disableDays={[0,1]}
      ></IcDateInput>
  </Story>
</Canvas>

### Min and max

<Canvas>
  <Story name="Min and max">
    <>
    <IcDateInput
      label='When would you like to collect your coffee?'
      min="02-01-2023"
      max="20/07/2023"
    />
      <IcTypography>Enter a date after 2nd Jan 2023 and before 20th July
        2023.</IcTypography>
    </>
  </Story>
</Canvas>

### Form

export const Form = () => {
  const formSubmit = (e) => {
    console.log(e);
  };
  return (
    <form onSubmit={formSubmit}>
      <IcDateInput
        label="When would you like to collect your coffee?"
        value={new Date("13 March 1951")}
      />
      <IcButton type="submit">Submit</IcButton>
      <IcButton type="reset">Reset</IcButton>
    </form>
  );
};

<Canvas>
  <Story name="Form" parameters={{ loki: { skip: true } }}>
    <Form />
  </Story>
</Canvas>
