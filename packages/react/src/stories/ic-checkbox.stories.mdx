import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import {
  IcCheckboxGroup,
  IcCheckbox,
  IcTextField,
  IcButton,
} from "../components";
import checkboxReadme from "../../../web-components/src/components/ic-checkbox/readme.md";
import checkboxGroupReadme from "../../../web-components/src/components/ic-checkbox-group/readme.md";
import { useForm } from "react-hook-form";
import { useState, useRef } from "react";

<Meta title="Checkbox" component={IcCheckboxGroup} />

<Description markdown={checkboxReadme + checkboxGroupReadme} />

### Default

<Canvas>
  <Story name="Default">
    <IcCheckboxGroup label="This is a label" name="1">
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Required

<Canvas>
  <Story name="Required">
    <IcCheckboxGroup label="This is a label" required name="1">
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Disabled

<Canvas>
  <Story name="Disabled">
    <IcCheckboxGroup label="This is a label" name="1" disabled>
      <IcCheckbox value="valueName1" label="Unselected / Disabled 1" disabled />
      <IcCheckbox value="valueName2" label="Unselected / Disabled 2" disabled />
      <IcCheckbox value="valueName3" label="Unselected / Disabled 3" disabled />
      <IcCheckbox
        value="valueName4"
        label="Selected / Disabled"
        disabled
        checked
      />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Sizes

<Canvas>
  <Story name="Sizes">
    <IcCheckboxGroup
      size="large"
      label="These are checkboxes with the 'size' attribute set on them individually"
      name="group1"
    >
      <IcCheckbox
        size="small"
        value="valueName1"
        label="Unselected / Default"
      />
      <IcCheckbox
        size="default"
        value="valueName2"
        label="Selected / Default"
        checked
      />
      <IcCheckbox
        size="large"
        value="valueName3"
        label="Unselected / Disabled"
        disabled
      />
    </IcCheckboxGroup>
    <IcCheckboxGroup
      size="small"
      label="This is a checkbox group with small checkboxes"
      name="group2"
    >
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
    <IcCheckboxGroup
      size="default"
      label="This is a checkbox group with default-sized checkboxes"
      name="group3"
    >
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
    <IcCheckboxGroup
      size="large"
      label="This is a checkbox group with large checkboxes"
      name="group4"
    >
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Hidden label

<Canvas>
  <Story name="Hidden label">
    <IcCheckboxGroup label="This is a label" hideLabel name="1">
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Conditional dynamic

<Canvas>
  <Story name="Conditional dynamic">
    <IcCheckboxGroup
      label="Conditional dynamic"
      name="1"
      onIcChange={(ev) =>
        console.log(
          ev.detail.selectedOption.label,
          ev.detail.selectedOption.checked
        )
      }
    >
      <IcCheckbox
        additionalFieldDisplay="dynamic"
        value="valueName1"
        label="option1"
      >
        <IcTextField
          slot="additional-field"
          placeholder="Placeholder"
          label="What's your favourite type of coffee?"
        />
      </IcCheckbox>
      <IcCheckbox
        additionalFieldDisplay="dynamic"
        value="valueName2"
        label="option2 - error example"
      >
        <IcTextField
          validationStatus="error"
          validationText="now it has really gone to (coffee) pot"
          slot="additional-field"
          placeholder="Placeholder"
          label="What's your favourite type of coffee?"
        />
      </IcCheckbox>
      <IcCheckbox
        additionalFieldDisplay="dynamic"
        value="valueName3"
        label="option3"
      >
        <IcTextField
          slot="additional-field"
          placeholder="Placeholder"
          label="What's your favourite type of coffee?"
        />
      </IcCheckbox>
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Conditional static

<Canvas>
  <Story name="Conditional static" parameters={{ loki: { skip: true } }}>
    <IcCheckboxGroup label=" Conditional static " name="1">
      <IcCheckbox value="valueName1" label="option1">
        <IcTextField
          slot="additional-field"
          label="What's your favourite type of coffee?"
        />
      </IcCheckbox>
      <IcCheckbox value="valueName2" label="option2" />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Helper text

<Canvas>
  <Story name="Helper text">
    <IcCheckboxGroup label="This is a label" name="1" helperText="Helper text">
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Validation

<Canvas>
  <Story name="Validation">
    <IcCheckboxGroup
      label="This is a label"
      name="1"
      validationStatus="error"
      validationText="Error message"
    >
      <IcCheckbox value="valueName1" label="Unselected / Default" />
      <IcCheckbox value="valueName2" label="Selected / Default" checked />
      <IcCheckbox value="valueName3" label="Unselected / Disabled" disabled />
    </IcCheckboxGroup>
  </Story>
</Canvas>

### Form - This shows how the checkbox button works within a form and is where the value of the checkbox button selected will appear in the console.log

export const Form = () => {
  const { register, handleSubmit, unregister } = useForm();
  const onCheck = (e) => {
    e.target.checked
      ? register(e.target.name, { value: e.target.value })
      : unregister(e.target.name);
  };
  return (
    <form onSubmit={handleSubmit((data) => console.log(data))}>
      <IcCheckboxGroup label="This is a label" name="1">
        <IcCheckbox
          name="checkbox1"
          value="valueName1"
          label="Unselected / Default"
          onCheckboxChecked={onCheck}
        />
        <IcCheckbox
          name="checkbox2"
          value="valueName2"
          label="Selected / Default"
          onCheckboxChecked={onCheck}
        />
        <IcCheckbox
          name="checkbox3"
          value="valueName3"
          label="Unselected / Disabled"
          Disabled
        />
      </IcCheckboxGroup>
      <input type="submit" value="Submit" />
    </form>
  );
};

<Canvas>
  <Story name="Form">
    <Form />
  </Story>
</Canvas>

### Indeterminate

<Canvas>
  <Story name="Indeterminate">
    <IcCheckboxGroup label="Liked things" name="1">
      <IcCheckbox
        value="drinks"
        label="Drinks"
        checked="true"
        indeterminate="true"
      >
        <IcCheckboxGroup
          name="2"
          label="Coffee"
          hideLabel
          slot="additional-field"
        >
          <IcCheckbox value="tea" label="Tea" />
          <IcCheckbox
            value="coffee"
            label="Coffee"
            checked="true"
            indeterminate="true"
          >
            <IcCheckboxGroup
              label="Coffees"
              hideLabel
              slot="additional-field"
              name="3"
            >
              <IcCheckbox value="mocha" label="Mocha" />
              <IcCheckbox value="espresso" label="Espresso" checked />
              <IcCheckbox value="cappucino" label="Cappucino" />
            </IcCheckboxGroup>
          </IcCheckbox>
          <IcCheckbox value="juice" label="Juice" />
        </IcCheckboxGroup>
      </IcCheckbox>
    </IcCheckboxGroup>
  </Story>
</Canvas>

### TextField value change

export const TextField = () => {
  const [textBoxValue, setTextBoxValue] = useState("");
  const onChangeTextBox = (e) => {
    setTextBoxValue(e.detail.value);
  };
  return (
    <div>
      <IcCheckboxGroup label="This is a label" name="1">
        <IcCheckbox
          additionalFieldDisplay="static"
          value="valueName1"
          label="option1"
        >
          <IcTextField
            slot="additional-field"
            placeholder="Placeholder"
            label="What's your favourite type of coffee?"
            onIcChange={onChangeTextBox}
          />
        </IcCheckbox>
      </IcCheckboxGroup>
      <br />
      <div>textbox value :{textBoxValue}</div>
    </div>
  );
};

<Canvas>
  <Story name="TextField value change">
    <TextField />
  </Story>
</Canvas>

### Controlled

export const Controlled = () => {
  const [checked, setChecked] = useState(true);
  const defaultButtonClickHandler = () => {
    setChecked(false);
  };
  const differentButtonClickHandler = () => {
    setChecked(true);
  };
  return (
    <>
      <IcCheckbox checked={checked} label="Label" value="valueName1" />
      <IcButton variant="primary" onClick={defaultButtonClickHandler}>
        Unchecked
      </IcButton>
      <IcButton variant="primary" onClick={differentButtonClickHandler}>
        Checked
      </IcButton>
    </>
  );
};

<Canvas>
  <Story name="Controlled">
    <Controlled />
  </Story>
</Canvas>

### Uncontrolled

export const Uncontrolled = () => {
  const checkboxEl = useRef();
  const handleCheck = () => {
    console.log(checkboxEl.current.checked);
  };
  return (
    <>
      <IcCheckbox
        ref={checkboxEl}
        label="Label"
        value="valueName1"
        onIcCheck={handleCheck}
      />
    </>
  );
};

<Canvas>
  <Story name="Uncontrolled">
    <Uncontrolled />
  </Story>
</Canvas>
