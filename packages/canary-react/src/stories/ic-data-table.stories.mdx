import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import { IcDataTable, IcDataTableTitleBar, IcPaginationBar } from "../components";
import { IcButton, IcEmptyState, IcTypography, IcLink, SlottedSVG } from "@ukic/react";
import { useState, useRef, useEffect } from "react";
import readme from "../../../canary-web-components/src/components/ic-data-table/readme.md";
import {
  COLS,
  DATA,
  LONG_DATA,
  LONG_COLS,
  ROW_HEADER_COLS,
  ROW_HEADER_DATA,
  LONG_DATA_VALUES,
  COLS_ALIGNMENT,
  ROW_ALIGNMENT,
  DATA_CELL_ALIGNMENT,
  COLS_ELEMENTS,
  DATA_REACT_ELEMENTS,
  COLUMNS_NO_TEXT_WRAP,
  ICON_DATA,
  ICON_COLS,
  COLUMNS_TEXT_WRAP,
  TEXT_WRAP_LONG_DATA,
  COLS_WIDTH,
  ACTION_DATA_ELEMENTS,
  DATA_WITH_EMPTY_VALUES
} from "../../../canary-web-components/src/components/ic-data-table/story-data";

import { mdiAccountGroup, mdiImage, mdiDelete } from "@mdi/js";

<Meta
  title="React Components/Data Table"
  component={IcDataTable}
  parameters={{
    componentAPI: {
      data: readme,
    },
  }}
/>

# [Canary]: Data Table

Use the data table component to display data in a tabular form.

There are two required props for data table:

- Caption: `string`
- Columns: `IcDataTableColumnObject[]`

Click the 'Component API' tab to view all the available props, events and slots for data tables.

To use the data table component, import `@ukic/canary-react` into your application.

### Basic

A basic example with no functionality.

<Canvas withSource="none">
  <Story name="Basic">
    <IcDataTable caption="Basic" columns={COLS} data={DATA} />
  </Story>
</Canvas>

#### Basic code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  {
    key: "lastName",
    title: "Last name",
    dataType: "string",
  },
  {
    key: "age",
    title: "Age",
    dataType: "number",
  },
  {
    key: "jobTitle",
    title: "Job title",
    dataType: "string",
  },
  {
    key: "address",
    title: "Address",
    dataType: "address",
  },
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  {
    firstName: "Sarah",
    lastName: "Smith",
    age: 28,
    jobTitle: "Analyst",
    address: "2 Main Street, Town, Country, Postcode",
  },
  {
    firstName: "Mark",
    lastName: "Owens",
    age: 45,
    jobTitle: "Team Lead",
    address: "12 Key Street, Town, Country, Postcode",
  },
  {
    firstName: "Naomi",
    lastName: "Thomas",
    age: 32,
    jobTitle: "Developer",
    address: "8 Side Street, Town, Country, Postcode",
  },
  {
    firstName: "Luke",
    lastName: "Ashford",
    age: 18,
    jobTitle: "Junior Developer",
    address: "5 New Street, Town, Country, Postcode",
  },
];

const DataTable = () => (
  <IcDataTable caption="Basic" columns={columns} data={data} />
);

export default DataTable;
```

### Embedded

The `embedded` boolean adds a border around the table so it can be added as a standalone table and is not required to stretch the full width of its parent container.

<Canvas withSource="none">
  <Story name="Embedded">
    <IcDataTable caption="Embedded" columns={COLS} data={DATA} embedded />
  </Story>
</Canvas>

#### Embedded code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable caption="Embedded" columns={columns} data={data} embedded />
);

export default DataTable;
```

## Density

The `density` variant provides three different styles for the data table.

- `dense` reduces the padding and font size of the table cells to give the data a more dense style.
- `default` provides a padding of `8px` which is the default spacing. This variant is seen in the first [basic](#basic) example.
- `spacious` gives the data table a more spacious look and feel by increasing the vertical padding as well as the font size.

### Dense

<Canvas withSource="none">
  <Story name="Dense">
    <IcDataTable caption="Dense" columns={COLS} data={DATA} density="dense" />
  </Story>
</Canvas>

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Dense"
    columns={columns}
    data={data}
    density="dense"
  />
);

export default DataTable;
```

### Spacious

<Canvas withSource="none">
  <Story name="Spacious">
    <IcDataTable
      caption="Dense"
      columns={COLS}
      data={DATA}
      density="spacious"
    />
  </Story>
</Canvas>

#### Spacious code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Spacious"
    columns={columns}
    data={data}
    density="spacious"
  />
);

export default DataTable;
```

### Sticky column headers

export const StickyHeader = () => {
  const [stickyHeader, setStickyHeader] = useState(false);
  return (
    <>
      <IcDataTable
        caption="Sticky Header"
        columns={COLS}
        data={LONG_DATA}
        stickyColumnHeaders={stickyHeader}
        style={{ height: "366px" }}
      />
      <div style={{ display: "flex", gap: "8px", marginTop: "8px" }}>
        <IcButton onClick={() => setStickyHeader(true)}>Stick Header</IcButton>
        <IcButton onClick={() => setStickyHeader(false)}>
          Unstick Header
        </IcButton>
      </div>
    </>
  );
};

When a height for the data table is set, the scroll bar will appear to the right. However, by default, the column headers will move up and out of view making it difficult to understand what the data means.
This can be mitigated by using the `stickyColumnHeaders` prop which takes a boolean. This can be toggled within the example below.

<Canvas withSource="none">
  <Story name="Sticky Column Headers">
    <StickyHeader />
  </Story>
</Canvas>

#### Sticky column headers code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    style={{ height: '150px' }}
    caption="Sticky Column Headers"
    columns={columns}
    data={data}
    stickyColumnHeaders
  />
);

export default DataTable;
```

### Column header truncation

By default, column header labels will wrap when they exceed the column width. To keep the column header height constant, the `columnHeaderTruncation` can be used. When set to `true`, the label will appear truncated and will display a tooltip with the full text when hovered over.

export const HeaderTruncation = () => {
  return (
    <IcDataTable
      style={{ height: "400px", width:"500px" }}
      caption="Column Header Truncation"
      columns={COLS}
      data={LONG_DATA}
      columnHeaderTruncation
    />
  );
};

<Canvas withSource="none">
  <Story name="Column header truncation">
    <HeaderTruncation />
  </Story>
</Canvas>

#### Column header truncation code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    style={{ height: "400px", width:"500px" }}
    caption="Column Header Truncation"
    columns={columns}
    data={data}
    columnHeaderTruncation
  />
);

export default DataTable;
```


### Row headers

Row headers allow headings to be added to individual rows and styles them as column headings. The column collection includes an additional `header` key which aligns with the row headers. The structure of the `header` column is the same as the columns (i.e. key, title, dataType).
The data array includes an additional `header` key which takes an object. The title of the row header is set by passing `title` as the key and a value.

<Canvas withSource="none">
  <Story name="Row Headers">
    <IcDataTable
      caption="Row Headers"
      columns={ROW_HEADER_COLS}
      data={ROW_HEADER_DATA}
    />
  </Story>
</Canvas>

#### Row headers code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: 'header',
    title: 'Job Title',
    dataType: 'string'
  },
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    header: { title: 'Employee'},
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Row Headers"
    columns={columns}
    data={data}
  />
);

export default DataTable;
```

### Sort

Set `sortable` to `true` to set the sort functionality on all columns. Sorting can be set to `unsorted`, `ascending` and `descending` by press the sort buttons next to the column heading.

<Canvas withSource="none">
  <Story name="Sort">
    <IcDataTable caption="Sort" columns={COLS} data={DATA} sortable />
  </Story>
</Canvas>

#### Sort code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Sort"
    columns={columns}
    data={data}
    sortable
  />
);

export default DataTable;
```

### Sort options

It is possible to change the sort options for the sort buttons. The `sortOptions` prop takes an object with `sortOrders` and `defaultColumn`. `sortOrders` allows the sort order to be amended as we all as remove a sort type. Such as changing the order to `descending`, `unsorted` and remove `ascending`. `defaultColumn` sets which column is ordered by default. This is set by padding the column key as the `defaultColumn` value.

<Canvas withSource="none">
  <Story name="Sort Options">
    <IcDataTable
      caption="Sort Options"
      columns={COLS}
      data={DATA}
      sortable
      sortOptions={{
        sortOrders: ["descending", "unsorted"],
        defaultColumn: "firstName",
      }}
    />
  </Story>
</Canvas>

#### Sort options code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Sort Options"
    columns={columns}
    data={data}
    sortable
    sortOptions={{
      sortOrders: ["descending", "unsorted"],
      defaultColumn: "firstName",
    }}
  />
);

export default DataTable;
```

### Pagination

Pagination allows large data sets to be split into pages in order to make the data easier to digest. Setting `showPagination` to `true` will add the `IcPagination` component to the bottom of the table. There a several sub components within pagination which are set via the `paginationBarOptions` prop.

- `itemsPerPageOptions` which allows customization of how many items appear on each page. This requires a collection with `label` and `value` key pairs.
- `showItemsPerPageControl` which show or hides the `itemsPerPage` component.
- `showGoToPageControl` displays controls which allows jumping between pages in a non-linear approach.

<Canvas withSource="none">
  <Story name="Pagination">
    <IcDataTable
      caption="Pagination"
      columns={LONG_COLS}
      data={LONG_DATA}
      showPagination
      paginationBarOptions={{
        itemsPerPageOptions: [
          { label: "5", value: "5" },
          { label: "10", value: "10" },
          { label: "15", value: "15" },
        ],
        showItemsPerPageControl: true,
        showGoToPageControl: true,
      }}
    />
  </Story>
</Canvas>

#### Pagination code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Pagination"
    columns={columns}
    data={data}
    showPagination
    paginationBarOptions={{
      itemsPerPageOptions: [
        { label: "5", value: "5" },
        { label: "10", value: "10" },
        { label: "15", value: "15" },
      ],
      showItemsPerPageControl: true,
      showGoToPageControl: true,
    }}
  />
);

export default DataTable;
```

### Column overrides

There may be a requirement to style a column differently to the rest of the data to add emphasis. For example, centre align data within the 'first name' column. To do this, add `columnAlignment` to the column. `columnAlignment` takes an object which sets the `horizontal` and `vertical` property.

- `horizontal` accepts `left`, `right` or `center`.
- `vertical` accepts `top`, `middle`, `bottom`.

`emphasis` can be added to the column by setting `high` or `low`.

<Canvas withSource="none">
  <Story name="Column Overrides">
    <IcDataTable
      caption="Column Overrides"
      columns={COLS_ALIGNMENT}
      data={DATA}
    />
  </Story>
</Canvas>

#### Column overrides code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
    columnAlignment: { horizontal: 'center', vertical: 'middle'},
    emphasis: 'high'
  },
  ...
];

// Copy data array for 'basic' example
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Column overrides"
    columns={columns}
    data={data}
  />
);

export default DataTable;
```

### Row Overrides

Row overrides allow styling to be applied at a row level and is set within the `header` object. The row overrides are used in conjunction with row headers. The following row overrides options apply:

- `rowAlignment` accepts `left`, `right` and `center`.
- `emphasis` accepts `high` or `low`.

<Canvas withSource="none">
  <Story name="Row Overrides">
    <IcDataTable
      caption="Row Overrides"
      columns={ROW_HEADER_COLS}
      data={ROW_ALIGNMENT}
    />
  </Story>
</Canvas>

#### Row overrides code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "header",
    title: "Job type",
    dataType: "string",
  },
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    header: {
      title: "Employee",
      rowAlignment: "middle",
      emphasis: "high",
    },
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Row overrides"
    columns={columns}
    data={data}
  />
);

export default DataTable;
```

### Cell overrides

Cell overrides allows styling to be applied at a cell level. The cell which requires an override accepts an object which requires `data` and can contain `cellAlignment` and/or `emphasis`.

- `data` is the cell value.
- `cellAlignment` accepts an object with the following key pairs:
  - `horizontal` accepts `left`, `right` or `center`.
  - `vertical` accepts `top`, `middle`, `bottom`.
- `emphasis` accepts `high` or `low`.

<Canvas withSource="none">
  <Story name="Cell Overrides">
    <IcDataTable
      caption="Cell Overrides"
      columns={COLS}
      data={DATA_CELL_ALIGNMENT}
    />
  </Story>
</Canvas>

#### Cell overrides code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: {
      data: "Joe",
      cellAlignment: { horizontal: "center", vertical: "middle" },
      emphasis: "high",
    },
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Row overrides"
    columns={columns}
    data={data}
  />
);

export default DataTable;
```

### Default empty state

When the table receives no data (either `null` or an empty array) it will automatically show an `IcEmptyState` below the headers.

<Canvas withSource="none">
  <Story name="Default Empty State">
    <IcDataTable caption="Default Empty State" columns={COLS} />
  </Story>
</Canvas>

#### Default empty state code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const DataTable = () => {
  return <IcDataTable
    caption="Default Empty State"
    columns={columns}
  />
};

export default DataTable;
```

### Slotted empty state

You can customise your own `IcEmptyState` component and slot it into the data table using the `empty-state` slot, to reflect different scenarios.

<Canvas withSource="none">
  <Story name="Slotted Empty State">
    <IcDataTable caption="Slotted Empty State" columns={COLS}>
      <IcEmptyState
        slot="empty-state"
        aligned="left"
        heading="Data source error"
        body="Error loading new data"
      >
        <IcButton slot="actions">Retry</IcButton>
      </IcEmptyState>
    </IcDataTable>
  </Story>
</Canvas>

#### Slotted empty state code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";
import { IcEmptyState, IcButton } from "@ukic/react";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const DataTable = () => {
  return <IcDataTable
    caption="Slotted Empty State"
    columns={columns}
  >
    <IcEmptyState slot="empty-state" aligned="left" heading="Data source error" body="Error loading new data">
      <IcButton slot="actions">Retry</IcButton>
    </IcEmptyState>
  </IcDataTable>
};

export default DataTable;
```

### Loading state

When a user wants to fetch their data asynchronously, a `loading` prop can be set to `true`, which then renders a circular variant of the `IcLoadingIndicator`.
The loading indicator can be customised using the `loadingOptions` prop:

- `appearance` can be `light` or `dark`
- `description` sets the aria-label of the component
- `label` sets the visual message
- `labelDuration` is the number of milliseconds before the label changes
- `showBackground` allows for a white background and grey border to help the indicator stand out

If it needs to be determinate, use `max`, `min` and `progress`.

<Canvas withSource="none">
  <Story name="Loading state">
    <IcDataTable
      caption="Loading state"
      columns={COLS}
      data={DATA}
      loading={true}
    />
  </Story>
</Canvas>

#### Loading state code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => {
  return <IcDataTable
    caption="Loading state"
    columns={columns}
    data={data}
    loading={true}
  />
};

export default DataTable;
```

### Updating state

If data in the table has changed, an `updating` prop has been supplied to show a linear `IcLoadingIndicator` just above the data rows.

This prop is also accompanied by an `updatingOptions` prop, which contains similar options to `loadingOptions`, minus `label` and `labelDuration` since the linear version is displayed.

<Canvas withSource="none">
  <Story name="Updating state">
    <IcDataTable
      caption="Updating state"
      columns={COLS}
      data={DATA}
      updating={true}
      updatingOptions={{ progress: 30 }}
    />
  </Story>
</Canvas>

#### Updating state code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];
const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => {
  return <IcDataTable
    caption="Updating state"
    columns={columns}
    data={data}
    updating={true}
    updatingOptions={{ progress: 30 }}
  />
};

export default DataTable;
```

### Links and elements in data

Custom HTML elements can be slotted or passed via the `data` prop to display in certain cells. When using the slotted method, the slot name follows the format of `{COLUMN_TAG}-{ROW_INDEX}`.

<Canvas withSource="none">
  <Story name="Links and Elements in data">
    <IcDataTable
      caption="Links and Elements in data"
      columns={COLS_ELEMENTS}
      data={DATA_REACT_ELEMENTS}
    >
      {DATA_REACT_ELEMENTS.map((_, index) => (
        <>
          <IcButton
            key={`actions-${index}`}
            variant="destructive"
            slot={`actions-${index}`}
            onClick={() => console.log("Delete")}
          >
            Delete
          </IcButton>
          <IcButton
            key={`actions2-${index}`}
            variant="icon"
            slot={`actions2-${index}`}
            aria-label="Delete row"
            onClick={() => console.log("Delete")}
          >
            <SlottedSVG path={mdiDelete} viewBox="0 0 24 24" />
          </IcButton>
        </>
      ))}
    </IcDataTable>
  </Story>
</Canvas>

#### Links and elements in data code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";
import { IcButton } from "@ukic/react";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
  {
    key: "actions",
    title: "Actions",
    dataType: "element",
    columnAlignment: { horizontal: "center" },
  },
];

const data = [
  {
    firstName: {
      data: "Joe",
      href: "https://www.example.com",
      target: "_blank",
      rel: "noopener noreferrer",
    },
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Links and Elements in data"
    columns={columns}
    data={data}
  >
    {data.map((_, index) => <IcButton key={index} slot={`actions-${index}`} variant="destructive" onClick={() => console.log("Delete")}>Delete</IcButton>)}
  </IcDataTable>
);

export default DataTable;
```

### Custom icons

Custom icons can be added to cells, columns and headers in the data table. To add it to headers, set the icon via the `columns` prop:

```json
icon: {
  icon: //ICON_STRING_GOES_HERE,
  onAllCells: //Boolean to determine whether column header icon should be replicated on all cells in the column,
  hideOnHeader: //Boolean for whether this icon should only be shown on cells and not on the header,
}
```

To add icons to individual cells, they can be added through the `data` prop, in a similar method to overriding the cell. Cell icons take priority over the `onAllCells` prop, meaning specific cells can be made to stand out.

Both cells and headers can also have icons slotted in. Cells use the slot format: `{COLUMN_KEY}-{ROW_INDEX}-icon`, and headers use the format: `{COLUMN_KEY}-column-icon`. Slotted icons take priority over icons inserted via the `columns` and `data` props.

<Canvas withSource="none">
  <Story name="Custom icons">
    <IcDataTable caption="Custom icons" columns={ICON_COLS} data={ICON_DATA}>
      <SlottedSVG slot="age-column-icon" path={mdiAccountGroup} />
      <SlottedSVG slot="firstName-0-icon" path={mdiAccountGroup} />
    </IcDataTable>
  </Story>
</Canvas>

#### Custom icons code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";
import { SlottedSVG } from "@ukic/react";
import { mdiAccountGroup } from '@mdi/js';

const imageIconSVG = '<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M180-120q-24 0-42-18t-18-42v-600q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm0-60h600v-600H180v600Zm56-97h489L578-473 446-302l-93-127-117 152Zm-56 97v-600 600Z"/></svg>';
const userIconSVG = '<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-481q-66 0-108-42t-42-108q0-66 42-108t108-42q66 0 108 42t42 108q0 66-42 108t-108 42ZM160-160v-94q0-38 19-65t49-41q67-30 128.5-45T480-420q62 0 123 15.5t127.921 44.694q31.301 14.126 50.19 40.966Q800-292 800-254v94H160Zm60-60h520v-34q0-16-9.5-30.5T707-306q-64-31-117-42.5T480-360q-57 0-111 11.5T252-306q-14 7-23 21.5t-9 30.5v34Zm260-321q39 0 64.5-25.5T570-631q0-39-25.5-64.5T480-721q-39 0-64.5 25.5T390-631q0 39 25.5 64.5T480-541Zm0-90Zm0 411Z"/></svg>';

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
    cellAlignment: "right",
    columnAlignment: { horizontal: "right", vertical: "middle" },
    icon: {
      icon: imageIconSVG,
      onAllCells: true,
      hideOnHeader: true,
    },
  },
  {
    key: "lastName",
    title: "Last name",
    dataType: "string",
    cellAlignment: "center",
    columnAlignment: { horizontal: "center", vertical: "bottom" },
    icon: {
      icon: imageIconSVG,
      onAllCells: true,
    },
  },
  ...
  {
    key: "address",
    title: "Address",
    dataType: "address",
    icon: {
      icon: imageIconSVG,
    },
  },
];

const data = [
  {
    firstName: {
      data: "Joe",
      icon: userIconSVG,
    },
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  {
    firstName: "Sarah",
    lastName: {
      data: "Smith",
      icon: userIconSVG,
    },
    age: 28,
    jobTitle: "Analyst",
    address: "2 Main Street, Town, Country, Postcode",
  },
  ...
  {
    firstName: "Naomi",
    lastName: "Thomas",
    age: 32,
    jobTitle: {
      data: "Developer",
      icon: userIconSVG,
    },
    address: "8 Side Street, Town, Country, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Custom icons"
    columns={columns}
    data={data}
  >
    <SlottedSVG slot="age-column-icon" path={mdiAccountGroup}/>
    <SlottedSVG slot="firstName-0-icon" path={mdiAccountGroup}/>
  </IcDataTable>
);

export default DataTable;
```

### Custom Row Heights

A data table can have its rows use custom heights, to help display more data per row. This involves using the `globalRowHeight` prop, which applies this custom height to all rows.

For a more granular approach, `variableRowHeight` exists. This is passed through the data object for each row of data, as well as that row's `index`. Using these properties, you can write a custom function that will return a number for that row's height based on your criteria.
Returning `null` from this function means that the row will use the `globalRowHeight` property value.

**_NOTE:_** If the data table uses the `density` prop, then your custom value will be scaled depending on the density, in order to keep content readable as the text size changes:

- `Dense` = 80% of `globalRowHeight` or `variableRowHeight`
- `Spacious` = 120% of `globalRowHeight` or `variableRowHeight`

E.G: If `globalRowHeight` = 100, a dense table will set the height to be **_80_**.

To quickly reset all row heights to the default, you can run the `resetRowHeights` method.

If you'd rather let the row calculate its own height based on its content, either set `globalRowHeight` to `auto`, or return `auto` from `variableRowHeight`.

<Canvas withSource="none">
  <Story name="Custom Row Heights">
    <IcDataTable
      caption="Custom Row Heights"
      columns={COLS}
      data={DATA}
      globalRowHeight={80}
      variableRowHeight={({ firstName, lastName }) =>
        firstName === "Joe" || lastName === "Owens" ? 200 : null
      }
    />
  </Story>
</Canvas>

#### Custom Row Heights code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const rowHeightFunc = ({ firstName, lastName }) => firstName === "Joe" || lastName === "Owens" ? 200 : null

const DataTable = () => (
  <IcDataTable
    caption="Custom Row Heights"
    columns={columns}
    data={data}
    globalRowHeight={80}
    variableRowHeight={rowHeightFunc}
  />
)

export default DataTable;
```

### Data truncation

When a row is given a set height, and has content that no longer fits into the cell area, the content becomes truncated. There are two types of truncation:

- `tooltip`: Adds a line-clamp to the cell and displays the message in a tooltip.
- `show-hide`: Adds a `See more/See less` button underneath the cell text, allowing the user to display the full content should they wish.

These values are set using the `truncationPattern` property.

By default, `globalRowHeight` is set to `auto`. If the `truncationPattern` attribute is set to `tooltip` or `show-hide` while `globalRowHeight` is `auto`, the data will not appear truncated due to the row height being set to the data which has the most height.

To see the data truncated, the `globalRowHeight` or `variableRowHeight` needs to be explicitly set to a height which is shorter than data which has the most lines.

#### Data truncation tooltip

export const TruncationTooltip = () => {
  const [globalRowHeight, setGlobalRowHeight] = useState(40);
  const handleRowHeight = (height) => {
    setGlobalRowHeight(height)
  }
  return (
    <>
      <IcDataTable
        caption="Truncating tooltip"
        columns={COLUMNS_NO_TEXT_WRAP}
        data={LONG_DATA_VALUES}
        truncationPattern="tooltip"
        globalRowHeight={globalRowHeight}
      />
      <div style={{ display: 'flex', gap: '8px', paddingBlock: '8px'}}>
        <IcButton onClick={() => handleRowHeight(80)}>Set globalRowHeight to 80</IcButton>
        <IcButton onClick={() => handleRowHeight(40)}>Reset globalRowHeight to 40</IcButton>
      </div>
    </>
  )
}

<Canvas withSource="none">
  <Story name="Data truncation tooltip">
    <TruncationTooltip />
  </Story>
</Canvas>

#### Data truncation tooltip code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Data truncation tooltip"
    columns={columns}
    data={data}
    truncationPattern="tooltip"
    globalRowHeight={40}
  />
)

export default DataTable;
```


#### Data truncation see more / see less

export const TruncationShowHide = () => {
  const [globalRowHeight, setGlobalRowHeight] = useState(40);
  const handleRowHeight = (height) => {
    setGlobalRowHeight(height)
  }
  return (
    <>
      <IcDataTable
        caption="Truncating show hide"
        columns={COLUMNS_NO_TEXT_WRAP}
        data={LONG_DATA_VALUES}
        truncationPattern="show-hide"
        globalRowHeight={globalRowHeight}
      />
      <div style={{ display: 'flex', gap: '8px', paddingBlock: '8px'}}>
        <IcButton onClick={() => handleRowHeight(80)}>Set globalRowHeight to 80</IcButton>
        <IcButton onClick={() => handleRowHeight(40)}>Reset globalRowHeight to 40</IcButton>
      </div>
    </>
  )
}


<Canvas withSource="none">
  <Story name="Data truncation see more / see less">
  <TruncationShowHide />
  </Story>
</Canvas>



#### Data truncation see more / see less code example

```tsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Truncating Cell Data"
    columns={columns}
    data={data}
    truncationPattern="show-hide"
    globalRowHeight={40}
  />
)

export default DataTable;
```

### Text Wrap

Text can be set to wrap in a particular column, row or cell. 

Any column, row or cell that text wrap is applied to will ignore the custom height if the custom height is too small and the full content will be shown.

To set text to wrap in a column, add `textWrap: true` as a key value.

```jsx
const column = [
  { key: "name", title: "Name", dataType: "string" },

  ...
]
```

To set text to wrap in a row, add `rowOptions: { textWrap: true }` to an object within the data array.


```jsx
const data = [
  {
    name: "Tim Rayes",
    age: 41,
    department: "Sales and Marketing",
    employeeNumber: 3,
    jobTitle:
      "Regional Sales and Marketing Strategy Director (Europe, the Middle East, and Africa)",
    rowOptions: {
      textWrap: true
    }
  },
  ...
]
```

To set text wrap in a cell, add `textWrap` to a data key within an object.

```jsx
const data = [
  {
    name: {
      data:"Tim Rayes",
      textWrap: true
    } 
    age: 41,
    department: "Sales and Marketing",
    employeeNumber: 3,
    jobTitle:
      "Regional Sales and Marketing Strategy Director (Europe, the Middle East, and Africa)",
  },
  ...
]
```

<Canvas withSource="none">
  <Story name="Text Wrap">
    <IcDataTable
      caption="Truncating Cell Data"
      columns={COLUMNS_TEXT_WRAP}
      data={TEXT_WRAP_LONG_DATA}
    />
  </Story>
</Canvas>

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const columns: IcDataTableColumnObject[] = [
  { key: "name", title: "Name", dataType: "string" },
  ...
  { key: "department", title: "Department", dataType: "string", textWrap: true },
  ...
];

const data = [
  {
    name: "John Smith",
    age: 36,
    department: "Accounts & Finance",
    employeeNumber: 1,
    jobTitle: {
      data: "Senior Financial Operations and Reporting Analyst",
      textWrap: true
    },
  },
  ...
  {
    name: "Tim Rayes",
    age: 41,
    department: "Sales and Marketing",
    employeeNumber: 3,
    jobTitle:
      "Regional Sales and Marketing Strategy Director (Europe, the Middle East, and Africa)",
    rowOptions: {
      textWrap: true
    }
  },
];

const DataTable = () => (
  <IcDataTable
    caption="Text Wrap"
    columns={columns}
    data={data}
  />
)

export default DataTable;
```


### Custom Title Bar

To add additional information about the data held in your data table, you can use the `title-bar` slot to add an `IcDataTableTitleBar`, which will appear above the column headers.

The title bar can have a description and metadata added, to provide supporting information to display some context about the data to the user. Primary and custom action slots also exist to allow for actions to be performed that are related to the data, which can be prominently displayed.

The `IcDataTableTitleBar` has a built-in density selector, which allows a user to quickly change the size and padding of cells to make it more readable. This can also be hidden if preferred.

More details on `IcDataTableTitleBar` can be found in the <IcLink href="/?path=/story/react-components-data-table-title-bar--basic" inline="">data table title bar documentation</IcLink>.

<Canvas withSource="none">
  <Story name="Custom Title Bar">
    <IcDataTable caption="Custom Title Bar" columns={COLS} data={DATA}>
      <IcDataTableTitleBar
        slot="title-bar"
        description="Data table description that describes the purpose of the table."
        metadata="128 items | 32gb | Updated: 01/02/03"
      >
        <IcButton slot="primary-action">Primary</IcButton>
        <IcButton slot="custom-actions" variant="icon" aria-label="Icon 1">
          <SlottedSVG path={mdiImage} viewBox="0 0 24 24" />
        </IcButton>
        <IcButton slot="custom-actions" variant="icon" aria-label="Icon 2">
          <SlottedSVG path={mdiImage} viewBox="0 0 24 24" />
        </IcButton>
        <IcButton slot="custom-actions" variant="icon" aria-label="Icon 3">
          <SlottedSVG path={mdiImage} viewBox="0 0 24 24" />
        </IcButton>
        <IcTypography slot="description" variant="body">
          <p>This is some text and <IcLink href="/" inline="">this is an inline link</IcLink> within the text.</p>
        </IcTypography>
      </IcDataTableTitleBar>
    </IcDataTable>
  </Story>
</Canvas>

#### Custom Title Bar code example

```jsx
import * as React from "react";
import { IcDataTable, IcDataTableTitleBar } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";
import { SlottedSVG, IcButton, IcTypography, IcLink } from "@ukic/react";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable
    caption="Custom Title Bar"
    columns={columns}
    data={data}
  >
    <IcDataTableTitleBar
      slot="title-bar"
      description="Data table description that describes the purpose of the table."
      metadata="128 items | 32gb | Updated: 01/02/03"
    >
      <IcButton slot="primary-action">Primary</IcButton>
      <IcButton slot="custom-actions" variant="icon" aria-label="Icon 1">
        <SlottedSVG path={mdiImage} viewBox="0 0 24 24"/>
      </IcButton>
      <IcButton slot="custom-actions" variant="icon" aria-label="Icon 2">
        <SlottedSVG path={mdiImage} viewBox="0 0 24 24"/>
      </IcButton>
      <IcButton slot="custom-actions" variant="icon" aria-label="Icon 3">
        <SlottedSVG path={mdiImage} viewBox="0 0 24 24"/>
      </IcButton>
      <IcTypography slot="description" variant="body">
        <p>
          This is some text and
          <IcLink href="/" inline="">this is an inline link</IcLink> within the
          text.
        </p>
      </IcTypography>
    </IcDataTableTitleBar>
  </IcDataTable>
);

export default DataTable;
```

### Updating data

The example below demonstrates how the pagination bar responds to changes within the data. 

More details on `ic-pagination-bar` can be found in the <IcLink href="/?path=/story/web-components-pagination-bar--docs" inline="">pagination bar documentation</IcLink>.

export const UpdatingData = () => {
  const [data, setData] = useState([]);
  const [pageOptions, setPageOptions] = useState([{ label: '5', value: '5' }]);
  
  const addData = () => {
    setData([...data, ...LONG_DATA]);
  }

  const clearData = () => {
    setData([]);
  }

  const updatePageOptions = () => {
    setPageOptions([
      { label: '10', value: '10' },
      { label: '20', value: '20' },
      { label: '50', value: '50' }
    ]);
  }

  const resetPageOptions = () => {
    setPageOptions([{ label: '5', value: '5' }]);
  }

  return (
    <>
      <IcDataTable
        caption="Updating Data"
        columns={COLS}
        data={data}
        showPagination
        paginationBarOptions={{
          itemsPerPageOptions: pageOptions,
          showItemsPerPageControl: true,
          showGoToPageControl: true,
          rangeLabelType: "page",
          appearance: "default"
        }}
      />
      <div style={{ display: "flex", gap: "8px", marginTop: "8px" }}>
        <IcButton onClick={addData}>Add data</IcButton>
        <IcButton onClick={updatePageOptions}>Update page lengths</IcButton>
        <IcButton onClick={clearData}>Reset data</IcButton>
        <IcButton onClick={resetPageOptions}>Reset page lengths</IcButton>
      </div>
    </>
  );
};

<Canvas withSource="none">
  <Story name="Updating data example">
    <UpdatingData />
  </Story>
</Canvas>

#### Updating data code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";
import { IcButton } from "@ukic/react";

const columns: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const data = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => {
  const [data, setData] = useState([]);
  const [pageOptions, setPageOptions] = useState([{ label: '5', value: '5' }]);

  const addData = () => {
    setData([...data, ...LONG_DATA]);
  }

  const clearData = () => {
    setData([]);
  }

  const updatePageOptions = () => {
    setPageOptions([
      { label: '10', value: '10' },
      { label: '20', value: '20' },
      { label: '50', value: '50' }
    ]);
  }

  const resetPageOptions = () => {
    setPageOptions([{ label: '5', value: '5' }]);
  }

 return (
    <>
      <IcDataTable
        caption="Updating Data"
        columns={COLS}
        data={data}
        showPagination
        paginationBarOptions={{
          itemsPerPageOptions: pageOptions,
          showItemsPerPageControl: true,
          showGoToPageControl: true,
          rangeLabelType: "page"
        }}
      />
      <div style={{ display: "flex", gap: "8px", marginTop: "8px" }}>
        <IcButton onClick={addData}>Add data</IcButton>
        <IcButton onClick={updatePageOptions}>Update page lengths</IcButton>
        <IcButton onClick={clearData}>Clear data</IcButton>
        <IcButton onClick={resetPageOptions}>Reset page lengths</IcButton>
      </div>
    </>
  );
};

export default DataTable;
```

export const defaultPaginationBarArgs = {
  itemsPerPageOptions: [
    { label: "5", value: "5" },
    { label: "10", value: "10" },
    { label: "15", value: "15" },
  ],
  rangeLabelType: "page",
  type: "simple",
  showItemsPerPageControl: true,
  showGoToPageControl: true,
  alignment: "right",
  appearance: "default",
  itemLabel: "Item",
  pageLabel: "Page",
  hideRangeLabel: false
};

### Slotted pagination bar

There may be scenarios when using `IcDataTable` when pagination and data fetching is done using a backend API.

To enable this behaviour, the `pagination-bar` slot can be utilised to provide a custom `IcPaginationBar` component, allowing the user to have more control over how their data is displayed & interacted with.

export const SlottedPagination = () => {
  const [itemsPerPage, setItemsPerPage] = useState(5);
  const [render, setRender] = useState(false);
  const [data, setData] = useState(LONG_DATA);

  useEffect(() => {
    setTimeout(() => {
      setRender(true);
    }, 2000);
  });

  const icItemsPerPageChangeHandler = (ev) => {
    setItemsPerPage(ev.detail.value);
    setData(LONG_DATA.slice(0, itemsPerPage));
  }

  const pageChangeHandler = (ev) => {
    const fromRow = (ev.detail.value - 1) * itemsPerPage;
    setData(LONG_DATA.slice(fromRow, fromRow + itemsPerPage));
  }

  return (
    <IcDataTable caption="Slotted pagination bar" columns={LONG_COLS} data={data}>
      {render && (
        <IcPaginationBar
          slot="pagination-bar"
          showItemsPerPageControl
          totalItems={LONG_DATA.length}
          itemsPerPageOptions={[
            { label: "5", value: "5" },
            { label: "10", value: "10" },
          ]}
          onIcItemsPerPageChange={icItemsPerPageChangeHandler}
          onIcPageChange={pageChangeHandler}
        />
      )}
    </IcDataTable>
  );
}

<Canvas withSource="none">
  <Story name="Slotted pagination bar">
    <SlottedPagination />
  </Story>
</Canvas>

#### Slotted pagination bar code example

```jsx
import { useState } from "react";
import { IcDataTable, IcPaginationBar } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const COLS: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const DATA = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => {
  const [data, setData] = useState(DATA);
  const [itemsPerPage, setItemsPerPage] = useState(5);

  const icItemsPerPageChangeHandler = (ev) => {
    setItemsPerPage(ev.detail.value);
    setData(data.slice(0, itemsPerPage));
  }

  const pageChangeHandler = (ev) => {
    const fromRow = (ev.detail.value - 1) * itemsPerPage;
    setData(data.slice(fromRow, fromRow + itemsPerPage));
  }

  return (
    <IcDataTable caption="Slotted pagination bar" columns={COLS} data={data}>
      <IcPaginationBar
        slot="pagination-bar"
        showItemsPerPageControl
        totalItems={long_data.length}
        itemsPerPageOptions={[
          { label: "5", value: "5" },
          { label: "10", value: "10" },
        ]}
        onIcItemsPerPageChange={icItemsPerPageChangeHandler}
        onIcPageChange={pageChangeHandler}
      />
    </IcDataTable>
  );
};
```


### Table sizing and column width

The dimensions of the data table can be set using the `width` and `height` prop. The prop accepts dimensions in `px`, `%`, `rem` and `auto`.

By default, the width is set to `100%` so the table spans across the viewport or parent container.

To set the column widths, the `columnWidth` property should be added to the relevant column within the column array.

The [table layout](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout) prop is vital to how the table resizing and column widths behave. By default, the table layout is set to `fixed`. If no column width is set, the columns widths will be equally set within the viewport or parent container.

A table with a `fixed` layout will force the table column widths to take precedence over the data with the table cells. 

For the column widths to be dictated by the content inside, set the `tableLayout` prop to `auto` and set the table `width` to `auto`.

To set the min and max width of a table cell, set the `table-layout` attribute to `auto` and set a `minWidth` or `maxWidth` value into `columnWidth`. The min and max width accepts dimensions in `px`, `%`, `rem`.

<Canvas withSource="none">
  <Story name="Table sizing and column width">
    <IcDataTable
      caption='Basic Table'
      columns={COLS_WIDTH}
      data={DATA}
      width="800px"
      tableLayout="auto"
    />
  </Story>
</Canvas>

### Table Sizing and column width code example

```jsx
import { useState } from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const COLS: IcDataTableColumnObject[] = [
  { key: "firstName", title: "First name", dataType: "string", columnWidth: "15%" },
  { key: "lastName", title: "Last name", dataType: "string", columnWidth: "300px" },
  { 
    key: "age", 
    title: "Age", 
    dataType: "number",
    columnWidth: {
      maxWidth: "100px",
    },
  },
  ...
];

const DATA = [
  {
    firstName: "Joe",
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => {
  return (
    <IcDataTable 
      caption="Table sizing and column widths"
      columns={COLS}
      data={DATA}
      width="800px"
      tableLayout="auto"
    />
  );
};
```

### Action Element

Action Element and Action OnClick can be passed via the `data` prop to display in certain cells, this is beneficial when dealing with large sets of data.

<Canvas withSource="none">
  <Story name="Action Element">
    <IcDataTable caption="Action Element" columns={COLS} data={ACTION_DATA_ELEMENTS} />
  </Story>
</Canvas>

#### Action Element code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

const COLS: IcDataTableColumnObject[] = [
  { key: "firstName", title: "First name", dataType: "string", columnWidth: "15%" },
  { key: "lastName", title: "Last name", dataType: "string", columnWidth: "300px" },
  { 
    key: "age", 
    title: "Age", 
    dataType: "number",
    columnWidth: {
      maxWidth: "100px",
    },
  },
  ...
];

const DATA = [
  {
    firstName: {
      data: "Joe",
      actionElement: `<ic-button variant="icon" size="small  aria-label="you can disable tooltips on icon buttons">  <svg  aria-label="refresh button"  xmlns="http://www.w3.org/2000/svg"    width="24"    height="24"    viewBox="0 0 24 24"    fill="#000000"  >    <path d="M0 0h24v24H0V0z" fill="none"></path>    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path>  </svg></ic-button>`,
      actionOnClick: () => console.log('hello')
    },
    lastName: "Bloggs",
    age: 30,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  ...
];

const DataTable = () => (
  <IcDataTable caption="Action Element" columns={COLS} data={DATA} />
);

export default DataTable;
```

### Missing cell data

An example showing the table being able to handle empty cell values (null, undefined or empty string).

<Canvas withSource="none">
  <Story name="Missing cell data">
    <IcDataTable caption="Missing cell data" columns={COLS} data={DATA_WITH_EMPTY_VALUES} />
  </Story>
</Canvas>

#### Missing cell data code example

```jsx
import * as React from "react";
import { IcDataTable } from "@ukic/canary-react";
import { IcDataTableColumnObject } from "@ukic/canary-web-components";

// Copy columns array for 'basic' example
const COLUMNS: IcDataTableColumnObject[] = [
  {
    key: "firstName",
    title: "First name",
    dataType: "string",
  },
  ...
];

const DATA = [
  {
    firstName: "Nigel",
    lastName: null,
    age: 62,
    jobTitle: "Developer",
    address: "1 Main Street, Town, County, Postcode",
  },
  {
    firstName: "Sarah",
    lastName: "Smith",
    age: 28,
    jobTitle: undefined,
    address: "2 Main Street, Town, County, Postcode",
  },
  {
    firstName: "Mark",
    lastName: "Owens",
    age: 45,
    jobTitle: "Team Lead",
    address: "",
  },
];

const DataTable = () => (
  <IcDataTable caption="Missing cell data" columns={COLUMNS} data={DATA} />
);

export default DataTable;
```

### Playground example

Go to the <IcLink href="/?path=/story/react-components-data-table--playground-example">separate page for the playground example</IcLink> to view the prop controls.

export const defaultArgs = {
  caption: "Screen reader caption for data table",
  columnHeaderTruncation: true,
  columns: COLS,
  data: LONG_DATA,
  density: "default",
  embedded: false,
  globalRowHeight: 40,
  height: "",
  hideColumnHeaders: false,
  loading: false,
  loadingAppearance: "dark",
  loadingDesc: "loading",
  loadingLabel: "Loading data...",
  loadingLabelDuration: 20, 
  loadingMax: 100,
  loadingMin: 0,
  loadingProgress: 50, 
  loadingShowBackground: false,
  minimumLoadingDisplayDuration: 1000,
  paginationItemsPerPageOptions: [
    { label: "5", value: "5" },
    { label: "10", value: "10" },
    { label: "15", value: "15" },
  ],
  paginationRangeLabelType: "page",
  paginationType: "simple",
  paginationShowItemsPerPageControl: true,
  paginationShowGoToPageControl: true,
  paginationAlignment: "right",
  paginationAppearance: "default",
  paginationItemLabel: "Item",
  paginationPageLabel: "Page",
  paginationHideRangeLabel: false,
  showPagination: true,
  sortable: false,
  sortOrders: ["unsorted", "ascending", "descending"],
  defaultColumn: "",
  stickyColumnHeaders: false,
  stickyRowHeaders: false,
  updating: false,
  updatingAppearance: "dark",
  updatingDesc: "loading",
  updatingMax: 100,
  updatingMin: 0,
  updatingProgress: 50, 
  titleBarSlot: true,
  titleBarDesc: "Title bar description",
  titleBarHeading: "Title bar heading",
  truncationPattern: "tooltip",
  hideDensitySelect: false,
  tableLayout: "fixed",
  titleBarMetadata: "128 items | 32gb | Updated: 01/02/03",
  titleBarPrimaryActionSlot: true,
  titleBarCustomActionSlot: true,
  width: ""
};

<Canvas withSource="none">
  <Story
    args={defaultArgs}
    argTypes={{
      density: {
        options: ["default", "dense", "spacious"],
        control: { type: "inline-radio" },
      },
      loadingAppearance: {
        options: ["dark", "light"],
        control: { type: "inline-radio" },
      },
      paginationAppearance: {
        options: ["default", "dark", "light"],
        control: { type: "inline-radio" },
      },
      paginationRangeLabelType: {
        options: ["page", "data"],
        control: { type: "inline-radio" },
      },
      paginationType: {
        options: ["simple", "complex"],
        control: { type: "inline-radio" },
      },
      paginationAlignment: {
        options: ["left", "right", "space-between"],
        control: { type: "inline-radio" },
      },
      tableLayout: {
        options: ["fixed", "auto"],
        control: { type: "inline-radio" },
      },
      truncationPattern: {
        options: ["tooltip", "show-hide"],
        control: { type: "inline-radio" },
      },
      updatingAppearance: {
        options: ["dark", "light"],
        control: { type: "inline-radio" },
      },
      titleBarSlot: {
        mapping: {
          true: "title-bar",
          false: "",
        }
      },
      titleBarPrimaryActionSlot: {
        mapping: {
          true: "primary-action",
          false: "",
        }
      },
      titleBarCustomActionSlot: {
        mapping: {
          true: "custom-actions",
          false: "",
        }
      },
    }}
    name="Playground example"
  >
    {(args) => (
      <IcDataTable
        caption={args.caption}
        columnHeaderTruncation={args.columnHeaderTruncation}
        columns={args.columns}
        data={args.data}
        density={args.density}
        embedded={args.embedded}
        globalRowHeight={args.globalRowHeight}
        height={args.height}
        hideColumnHeaders={args.hideColumnHeaders}
        loading={args.loading}
        loadingOptions={{
          appearance: args.loadingAppearance,
          description: args.loadingDesc,
          label: args.loadingLabel,
          labelDuration: args.loadingLabelDuration,
          max: args.loadingMax,
          min: args.loadingMin,
          progress: args.loadingProgress,
          showBackground: args.loadingShowBackground
        }}
        minimumLoadingDisplayDuration={args.minimumLoadingDisplayDuration}
        paginationBarOptions={{
          itemsPerPageOptions: args.paginationItemsPerPageOptions,
          rangeLabelType: args.paginationRangeLabelType,
          type: args.paginationType,
          showItemsPerPageControl: args.paginationShowItemsPerPageControl,
          showGoToPageControl: args.paginationShowGoToPageControl,          
          appearance: args.paginationAppearance,
          alignment: args.paginationAlignment,
          pageLabel: args.paginationPageLabel,
          itemLabel: args.paginationItemLabel,
          hideRangeLabel: args.paginationHideRangeLabel
        }}
        showPagination={args.showPagination}
        sortable={args.sortable}
        sortOptions={{
          sortOrders: args.sortOrders,
          defaultColumn: args.defaultColumn
        }}
        stickyColumnHeaders={args.stickyColumnHeaders}
        stickyRowHeaders={args.stickyRowHeaders}
        tableLayout={args.tableLayout}
        truncationPattern={args.truncationPattern}
        updating={args.updating}
        updatingOptions={{
          appearance: args.updatingAppearance,
          description: args.updatingDesc,
          max: args.updatingMax,
          min: args.updatingMin,
          progress: args.updatingProgress
        }}
        width={args.width}
      >
        <IcDataTableTitleBar
          slot={args.titleBarSlot}
          description={args.titleBarDesc}
          heading={args.titleBarHeading}
          hideDensitySelect={args.hideDensitySelect}
          metadata={args.titleBarMetadata}
        >
          <IcButton slot={args.titleBarPrimaryActionSlot}>Primary</IcButton>
          <IcButton slot={args.titleBarCustomActionSlot} variant="icon" aria-label="Icon 1">
            <SlottedSVG path={mdiImage} viewBox="0 0 24 24" />
          </IcButton>
        </IcDataTableTitleBar>
      </IcDataTable>
    )}
  </Story>
</Canvas>
