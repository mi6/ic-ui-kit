import {
  Meta,
  Story,
  Canvas,
  Controls,
  Description,
} from "@storybook/blocks";
import { IcDatePicker } from "../components";
import { IcLink } from "@ukic/react";
import { useState } from "react";
import { useArgs } from '@storybook/preview-api';
import readme from "../../../canary-web-components/src/components/ic-date-picker/readme.md";
import * as IcDatePickerStories from './ic-date-picker.stories';

<Meta of={IcDatePickerStories} />

# \[Canary]: Date Picker

Use a date picker to select a single date where visualising that date could be useful.

There is one required prop for a date picker:

* label: `string`

Click the 'Component API' tab to view all the available props and events for date pickers.

To use the date picker component, import `@ukic/canary-react` into your application.

### Default

The default date picker, which uses the date format of `DD/MM/YYYY`.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.Default} />
</Canvas>

#### Default code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" />
);

export default DatePicker;
```

### Sizes

Set the size of the date picker by using the `size` prop. This prop takes the values `small`, `default` or `large`. Depending on the chosen size, the prop will apply styling to increase or decrease the amount of spacing within the component.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.Sizes} />
</Canvas>

#### Sizes code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePickers = () => (
  <div style={{ display: "flex", flexDirection: "column", gap: "16px" }}>
    <IcDatePicker label="When would you like to collect your coffee?" size="small" />
    <IcDatePicker label="When would you like to collect your coffee?" />
    <IcDatePicker label="When would you like to collect your coffee?" size="large" />
  </div>
);

export default DatePickers;
```

### Max width

Set the size of the input field by using the `--input-width` CSS custom property. The picker will grow, but not exceed its maximum supported width.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.MaxWidth} />
</Canvas>

#### Max width code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePickers = () => (
  <div style={{ display: "flex", flexDirection: "column", gap: "16px" }}>
    <IcDatePicker style={{ "--input-width": "500px" }} label="When would you like to collect your coffee?" size="small" />
    <IcDatePicker style={{ "--input-width": "500px" }} label="When would you like to collect your coffee?" />
    <IcDatePicker style={{ "--input-width": "500px" }} label="When would you like to collect your coffee?" size="large" />
  </div>
);

export default DatePickers;
```

### Disabled

Disable the date picker and prevent user interaction by using the `disabled` prop.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.Disabled} />
</Canvas>

#### Disabled code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" disabled />
);

export default DatePicker;
```

### Date formats

The `dateFormat` prop determines how dates are displayed. The supported formats are `DD/MM/YYYY`, `MM/DD/YYYY` or `YYYY/MM/DD`.
The default format is `DD/MM/YYYY`.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.DateFormats} />
</Canvas>

#### Date formats code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePickers = () => (
  <div style={{ display: "flex", flexDirection: "column", gap: "16px" }}>
    <IcDatePicker label="When would you like to collect your coffee?" />
    <IcDatePicker label="When would you like to collect your coffee?" dateFormat="MM/DD/YYYY" />
    <IcDatePicker label="When would you like to collect your coffee?" dateFormat="YYYY/MM/DD" />
  </div>
);

export default DatePickers;
```

### Value

The `value` prop sets the date in the input field. The value can be in any format supported by the `dateFormat` prop, in ISO 8601 date string format (yyyy-mm-dd) or as a JavaScript Date object.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.Value} />
</Canvas>

#### Value code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" value="01/01/2024" />
);

export default DatePicker;
```

### Open at date

If no `value` is set, the `openAtDate` prop can be used to specify the date in view when the calendar view is opened. If not set to a value, the calendar will default to showing the current date.

The supported formats are the same as for the `value` prop.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.OpenAtDate} />
</Canvas>

#### Open at date code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker 
    label="When would you like to collect your coffee?"
    helperText="The calendar will open showing 25th December 2024, if no date selected" 
    openAtDate="2024-12-25" 
  />
);

export default DatePicker;
```

### Start of week

The first day of the week can be changed by setting the `startOfWeek` prop. This is a numeric value where 0 = Sunday, 1 = Monday, etc up to 6 = Saturday.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.StartOfWeek} />
</Canvas>

#### Start of week code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" startOfWeek="0" />
);

export default DatePicker;
```

### Disable days of week

Specific days of the week can be disabled from selection by setting the `disableDays` prop. The value can be set as an array of numeric values where where 0 = Sunday, 1 = Monday, etc up to 6 = Saturday.

export const disabledDaysOfWeek = [0, 6]

<Canvas withSource="none">
  <Story of={IcDatePickerStories.DisableDaysOfWeek} />
</Canvas>

#### Disable days of week code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const disabledDaysOfWeek = [0, 6]

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" disableDays={disabledDaysOfWeek} />
);

export default DatePicker;
```

### Max & Min

The `max` and `min` props can be used to limit the range of dates available for selection. Values can be in any format supported by the `dateFormat` prop, in ISO 8601 date string format (yyyy-mm-dd) or as a JavaScript Date object.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.MaxMin} />
</Canvas>

#### Max & Min code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker 
    label="When would you like to collect your coffee?" 
    helperText="Choose a date between the 1st and 31st of July"
    min="2024-07-01"
    max="2024-07-31"
    showPickerTodayButton="false"
  />
);

export default DatePicker;
```

### Disable dates in past

Dates before today can be disabled with the `disablePast` prop.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.DisableDatesInPast} />
</Canvas>

#### Disable dates in past code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" disablePast />
);

export default DatePicker;
```

### Disable dates in future

Dates after today can be disabled with the `disableFuture` prop.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.DisableDatesInFuture} />
</Canvas>

#### Disable dates in future code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" disableFuture />
);

export default DatePicker;
```

### Days outside month hidden

Days outside of the current month in view can be hidden by setting the `showDaysOutsideMonth` prop to `false`.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.DaysOutsideMonthHidden} />
</Canvas>

#### Days outside month hidden code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker label="When would you like to collect your coffee?" showDaysOutsideMonth="false" />
);

export default DatePicker;
```

### Today & clear buttons hidden

The "Go to today" and "Clear" buttons can be hidden from the calendar view by setting the `showPickerTodayButton` and `showPickerClearButton` props to `false`.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.TodayClearButtonsHidden} />
</Canvas>

#### Today & clear buttons hidden code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker 
    label="When would you like to collect your coffee?" 
    showPickerTodayButton="false"
    showPickerClearButton="false"
  />
);

export default DatePicker;
```

### JavaScript dates

Any prop that accepts a date value can be set to a Javascript Date object. The following example sets the `value`, `max` and `min` props.

<Canvas withSource="none">
  <Story of={IcDatePickerStories.JavaScriptDates} />
</Canvas>

#### JavaScript dates code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePicker = () => (
  <IcDatePicker 
    label="When would you like to collect your coffee?" 
    min={new Date(2024, 6, 1)}
    max={new Date(2024, 6, 31)}
    value={new Date(2024, 6, 15)}
    helperText="Choose a date between the 1st and 31st of July"
    showPickerTodayButton="false"
  />
);

export default DatePicker;
```

### IcChange event

The `IcChange` event is emitted by the date picker when the selected date changes.

export const DatePickerWithIcChange = () => {
  const [selectedDate, setSelectedDate] = useState();
  const [value, setValue] = useState();
  const dateChangedHandler = (event) => {
    setValue(event.detail.value);
    setSelectedDate(event.detail.value);
  }
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: "50px" }}>
      <IcDatePicker 
        label="When would you like to collect your coffee?" 
        onIcChange={dateChangedHandler}
        value={value}
      /> 
      <span>
        {`Selected date: ${selectedDate}`}
      </span>  
    </div>
  );
};

<Canvas withSource="none">
  <Story of={IcDatePickerStories.IcChangeEvent} />
</Canvas>

#### IcChange event code example

```jsx
import * as React from "react";
import { IcDatePicker } from "@ukic/canary-react";

const DatePickerWithIcChange = () => {
  const [selectedDate, setSelectedDate] = React.useState();
  const [value, setValue] = useState();
  const dateChangedHandler = (event) => {
    setValue(event.detail.value);
    setSelectedDate(event.detail.value);
  }
  return (
    <div style={{ display: "flex", flexDirection: "column", gap: "50px" }}>
      <IcDatePicker 
        label="When would you like to collect your coffee?" 
        onIcChange={dateChangedHandler}
        value={value}
      /> 
      <span>
        {`Selected date: ${selectedDate}`}
      </span>  
    </div>
  );
};

export default DatePickerWithIcChange;
```

### Playground example

Go to the <IcLink href="/?path=/story/react-components-date-picker--playground-example">separate page for the playground example</IcLink> to view the prop controls.

export const defaultArgs = {
  dateFormat: "DD/MM/YYYY",
  disabled: false,
  disableDays: [],
  disableDaysMessage: "This day is not available",
  disableFuture: false,
  disableFutureMessage: "This date is in the future",
  disablePast: false,
  disablePastMessage: "This date is in the past",
  helperText: "Choose a date",
  hideHelperText: false,
  hideLabel: false,
  invalidDateMessage: "Invalid date",
  label: "When would you like to collect your coffee?",
  max: "",
  min: "",
  openAtDate: "",
  required: false,
  showDaysOutsideMonth: true,
  showPickerClearButton: true,
  showPickerTodayButton: true,
  size: "default",
  startOfWeek: 1,
  validationStatus: "",
  validationText: "",
  value: "",
};

<Canvas withSource="none">
  <Story of={IcDatePickerStories.PlaygroundExample} />
</Canvas>
