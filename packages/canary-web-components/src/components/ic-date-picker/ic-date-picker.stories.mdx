import {
  Meta,
  Story,
  Canvas,
  ArgsTable,
  Description,
} from "@storybook/addon-docs";
import {
  Default,
  Sizes,
  MaxWidth,
  DateFormats,
  Value,
  OpenAt,
  WeekStart,
  WorkingWeek,
  MaxMin,
  Disabled,
  DisablePast,
  DisableFuture,
  HideOutsideMonth,
  HideButtons,
  JSDates,
  IcChangeDate,
} from "./story-data";
import { html } from "lit-html";
import readme from "./readme.md";

<Meta
  title="Web Components/Date Picker"
  component="Date Picker"
  parameters={{
    componentAPI: {
      data: readme,
    },
  }}
/>

# [Canary]: Date Picker

Use a date picker to select a single date where visualising that date could be useful.

There is one required prop for a date picker:

- label: `string`

Click the 'Component API' tab to view all the available props and events for date pickers.

To use the date picker component, import `@ukic/canary-web-components` into your application.

### Default

The default date picker, which uses the date format of `DD/MM/YYYY`.

<Canvas withSource="none">
  <Story name="Default" parameters={{ loki: { skip: true } }} height="540px">
    {Default()}
  </Story>
</Canvas>

#### Default code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
></ic-date-picker>
```

### Sizes

Set the size of the date picker by using the `size` prop. This prop takes the values `small`, `default` or `large`. Depending on the chosen size, the prop will apply styling to increase or decrease the amount of spacing within the component.

<Canvas withSource="none">
  <Story name="Sizes" parameters={{ loki: { skip: true } }} height="790px">
    {Sizes()}
  </Story>
</Canvas>

#### Sizes code example

```html
<div style="display: flex; flex-direction: column; gap: 16px;">
  <ic-date-picker
    label="When would you like to collect your coffee?"
    size="small"
  ></ic-date-picker>
  <ic-date-picker
    label="When would you like to collect your coffee?"
    size="medium"
  ></ic-date-picker>
  <ic-date-picker
    label="When would you like to collect your coffee?"
    size="large"
  ></ic-date-picker>
</div>
```

### Max width

Set the size of the input field by using the `--input-width` CSS custom property. The picker will grow, but not exceed its maximum supported width.

<Canvas withSource="none">
  <Story name="Max width" parameters={{ loki: { skip: true } }} height="790px">
    {MaxWidth()}
  </Story>
</Canvas>

#### Max width code example

```html
<div style="display: flex; flex-direction: column; gap: 16px;">
  <ic-date-picker
    style="--input-width: 500px"
    label="When would you like to collect your coffee?"
    size="small"
  ></ic-date-picker>
  <ic-date-picker
    style="--input-width: 500px"
    label="When would you like to collect your coffee?"
    size="medium"
  ></ic-date-picker>
  <ic-date-picker
    style="--input-width: 500px"
    label="When would you like to collect your coffee?"
    size="large"
  ></ic-date-picker>
</div>
```

### Disabled

Disable the date picker and prevent user interaction by using the `disabled` prop.

<Canvas withSource="none">
  <Story name="Disabled" parameters={{ loki: { skip: true } }} height="100px">
    {Disabled()}
  </Story>
</Canvas>

#### Disabled code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  disabled
></ic-date-picker>
```

### Date formats

The `date-format` prop determines how dates are displayed. The supported formats are `DD/MM/YYYY`, `MM/DD/YYYY` or `YYYY/MM/DD`.
The default format is `DD/MM/YYYY`.

<Canvas withSource="none">
  <Story
    name="Date formats"
    parameters={{ loki: { skip: true } }}
    height="750px"
  >
    {DateFormats()}
  </Story>
</Canvas>

#### Date formats code example

```html
<div style="display: flex; flex-direction: column; gap: 16px;">
  <ic-date-picker
    label="When would you like to collect your coffee?"
  ></ic-date-picker>
  <ic-date-picker
    label="When would you like to collect your coffee?"
    date-format="MM/DD/YYYY"
  ></ic-date-picker>
  <ic-date-picker
    label="When would you like to collect your coffee?"
    date-format="YYYY/MM/DD"
  ></ic-date-picker>
</div>
```

### Value

The `value` prop sets the date in the input field. The value can be in any format supported by the `date-format` prop, in ISO 8601 date string format (yyyy-mm-dd) or as a JavaScript Date object.

<Canvas withSource="none">
  <Story name="Value" parameters={{ loki: { skip: true } }} height="540px">
    {Value()}
  </Story>
</Canvas>

#### Value code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  value="01/01/2024"
></ic-date-picker>
```

### Open at date

If no `value` is set, the `open-at-date` prop can be used to specify the date in view when the calendar view is opened. If not set to a value, the calendar will default to showing the current date.

The supported formats are the same as for the `value` prop.

<Canvas withSource="none">
  <Story
    name="Open at date"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {OpenAt()}
  </Story>
</Canvas>

#### Open at date code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  helper-text="The calendar will open showing 25th December 2024, if no date selected"
  open-at-date="2024-12-25"
></ic-date-picker>
```

### Start of week

The first day of the week can be changed by setting the `start-of-week` prop. This is a numeric value where 0 = Sunday, 1 = Monday, etc up to 6 = Saturday.

<Canvas withSource="none">
  <Story
    name="Start of week"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {WeekStart()}
  </Story>
</Canvas>

#### Start of week code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  start-of-week="0"
></ic-date-picker>
```

### Disable days of week

Specific days of the week can be disabled from selection by setting the `disableDays` prop. The value can be set as an array of numeric values where where 0 = Sunday, 1 = Monday, etc up to 6 = Saturday.

<Canvas withSource="none">
  <Story
    name="Disable days of week"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {WorkingWeek()}
  </Story>
</Canvas>

#### Disable days of week code example

```html
<ic-date-picker
  id="weekday-picker"
  label="When would you like to collect your coffee?"
></ic-date-picker>
<script>
  document.querySelector("#weekday-picker").disableDays = [0, 6];
</script>
```

### Max & Min

The `max` and `min` props can be used to limit the range of dates available for selection. Values can be in any format supported by the `date-format` prop, in ISO 8601 date string format (yyyy-mm-dd) or as a JavaScript Date object.

<Canvas withSource="none">
  <Story name="Max & Min" parameters={{ loki: { skip: true } }} height="500px">
    {MaxMin()}
  </Story>
</Canvas>

#### Max & Min code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  helper-text="Choose a date between the 1st and 31st of July"
  min="2024-07-01"
  max="2024-07-31"
  show-picker-today-button="false"
></ic-date-picker>
```

### Disable dates in past

<Canvas withSource="none">
  <Story
    name="Disable dates in past"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {DisablePast()}
  </Story>
</Canvas>

#### Disable dates in past code example

Dates before today can be disabled with the `disable-past` prop.

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  disable-past
></ic-date-picker>
```

### Disable dates in future

Dates after today can be disabled with the `disable-future` prop.

<Canvas withSource="none">
  <Story
    name="Disable dates in future"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {DisableFuture()}
  </Story>
</Canvas>

#### Disable dates in future code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  disable-future
></ic-date-picker>
```

### Days outside month hidden

Days outside of the current month in view can be hidden by setting the `show-days-outside-month` prop to `false`.

<Canvas withSource="none">
  <Story
    name="Days outside month hidden"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {HideOutsideMonth()}
  </Story>
</Canvas>

#### Days outside month hidden code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  show-days-outside-month="false"
></ic-date-picker>
```

### Today & clear buttons hidden

The "Go to today" and "Clear" buttons can be hidden from the calendar view by setting the `show-picker-today-button` and `show-picker-clear-button` props to `false`.

<Canvas withSource="none">
  <Story
    name="Today & clear buttons hidden"
    parameters={{ loki: { skip: true } }}
    height="480px"
  >
    {HideButtons()}
  </Story>
</Canvas>

#### Today & clear buttons hidden code example

```html
<ic-date-picker
  label="When would you like to collect your coffee?"
  show-picker-today-button="false"
  show-picker-clear-button="false"
></ic-date-picker>
```

### JavaScript dates

Any prop that accepts a date value can be set to a Javascript Date object. The following example sets the `value`, `max` and `min` props.

<Canvas withSource="none">
  <Story
    name="JavaScript dates"
    parameters={{ loki: { skip: true } }}
    height="500px"
  >
    {JSDates()}
  </Story>
</Canvas>

#### JavaScript dates code example

```html
<ic-date-picker
  id="js-date-picker"
  label="When would you like to collect your coffee?"
  helper-text="Choose a date between the 1st and 31st of July"
  show-picker-today-button="false"
></ic-date-picker>
<script>
  const datePicker = document.querySelector("#js-date-picker");
  datePicker.min = new Date(2024, 6, 1);
  datePicker.max = new Date(2024, 6, 31);
  datePicker.value = new Date(2024, 6, 15);
</script>
```

### IcChange event

The `IcChange` event is emitted by the date picker when the selected date changes.

<Canvas withSource="none">
  <Story
    name="IcChange event"
    parameters={{ loki: { skip: true } }}
    height="540px"
  >
    {IcChangeDate()}
  </Story>
</Canvas>

#### IcChange event code example

```html
<div style="display: flex; flex-direction: column; gap: 50px;">
  <ic-date-picker
    id="ic-change-datepicker"
    label="When would you like to collect your coffee?"
  ></ic-date-picker>
  <span id="selected-date"> Selected date: </span>
</div>
<script>
  const updateSelectedDate = (ev) => {
    const el = document.querySelector("#selected-date");
    el.innerHTML = "Selected date: " + ev.detail.value;
  };
  const datePicker = document.querySelector("#ic-change-datepicker");
  datePicker.addEventListener("icChange", updateSelectedDate);
</script>
```
